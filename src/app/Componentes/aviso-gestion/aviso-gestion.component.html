<div class="container-fluid">
  <div class="row">
    <div class="col-md-3">

      <div class="vertical-menu">
        <a href="#" class="active">Herramientas</a>
        <p></p>
        <a class="btn btn-info btn-sm" (click)="getAvisosByCategoria(categoria_filtrado)">Filtrar categoria</a>
        <input placeholder="Categoria" type="text" class="form-control" [(ngModel)]="categoria_filtrado" name="categoria" id="categoria" required>
        <p></p>
        <a class="btn btn-info btn-sm" (click)="getAvisosByTipo(tipo_filtrado)">Filtrar Tipo</a>
        <input placeholder="Tipo" type="text" class="form-control" [(ngModel)]="tipo_filtrado" name="tipo" id="tipo" required>
        <p> </p>
        <a class="btn btn-info btn-sm" (click)="getAvisosBySubtipo(subtipo_filtrado)">Filtrar Subtipo</a>
        <input placeholder="Tipo" type="text" class="form-control" [(ngModel)]="subtipo_filtrado" name="subtipo" id="subtipo" required>
        <p> </p>
        <a class="btn btn-info btn-sm" (click)="getAvisosByPrioridad(prioridad_filtrado)">Filtrar Prioridad</a>
        <input placeholder="Prioridad" type="text" class="form-control" [(ngModel)]="prioridad_filtrado" name="prioridad" id="prioridad" required>
        <p></p>
        <a class="btn btn-info btn-sm"  (click)="getAvisosOrderedByDate()">Ordenar por fecha</a>
        <p></p>
        <div>
          <a href="#/categorias" class="btn btn-warning btn-lg">Gestionar Categorias</a>
        </div>
        <p></p>
        <div>
          <a class="btn btn-danger btn-lg" (click)="getAvisoList()">Quitar filtros</a>
        </div>
      </div>
    </div>
    <div class="col-md-9">
      <table class="table table-striped table-responsive">
        <thead>
        <tr>
          <th>Ciudad</th>
          <th>Calle</th>
          <th>Descripción</th>
          <th>Fecha</th>
          <th>Seguimiento</th>
          <th>Tipo</th>
          <th>Subtipo</th>
          <th>Prioridad</th>
          <th>Acción</th>
        </tr>
        </thead>
        <tbody>
        <tr *ngFor="let a of aviso">
          <td>{{ a.datosUbicacion.ciudad }}</td>
          <td>{{ a.datosUbicacion.calle }}</td>
          <td>{{ a.descripcion }}</td>
          <td>{{ a.fecha }}</td>
          <td>{{ a.seguimiento}}</td>
          <td>{{a.categoria.tipo}}</td>
          <td>{{a.categoria.subtipo}}</td>
          <td>{{a.categoria.prioridad}}</td>
          <td>
            <a type="button" id="btn1" data-toggle="modal"  data-target="#myModal" class="btn btn-info btn-xs" (click)="getAvisoDetails(a._id)">Detalles</a>
            <a (click)="deleteAviso(a._id)" class="btn btn-danger btn-md">
              <span class="glyphicon glyphicon-remove" aria-hidden="true"></span>
            </a>
          </td>
        </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>

<div id="myModal" class="modal fade" role="dialog" data-backdrop="static" data-keyboard="false">
  <div class="modal-dialog">

    <!-- Modal content-->
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal">&times;</button>
        <h4 class="modal-title" align="center"><b>Edición de aviso</b></h4>
      </div>
      <div class="modal-body">
        <h3 style="padding-bottom: 25px">Aviso (Próximamente foto)</h3>
        <h4><strong>Categoría: </strong>{{ avisomodal.categoria }}</h4>
        <h4><strong>Tipo: </strong>{{ avisomodal.categoria.tipo }}</h4>
        <h4><strong>Subtipo: </strong>{{ avisomodal.categoria.subtipo }}</h4>
        <h4><strong>Ciudad: </strong>{{ avisomodal.datosUbicacion.ciudad }}</h4>
        <h4><strong>Calle: </strong>{{ avisomodal.datosUbicacion.calle }}</h4>
        <h4><strong>Descripción: </strong>{{ avisomodal.descripcion }}</h4>
        <h4><strong>Seguimiento: </strong>{{ avisomodal.seguimiento }}</h4>
        <h4><strong>Autor: </strong>{{ avisomodal.autor }}</h4>
        <h4><strong>Apoyos: </strong>{{ avisomodal.apoyos }}</h4><br>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-info btn-primary" data-toggle="modal" data-dismiss="modal" data-target="#myModalEditAviso" (click)="getCategoria(c._id)">Editar</button>
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
      </div>
    </div>

  </div>
</div>


<div id="myModalEditAviso" class="modal fade" role="dialog"  data-backdrop="static" data-keyboard="false">
  <div class="modal-dialog">

    <!-- Modal content-->
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal">&times;</button>
        <h4 class="modal-title" align="center"><b>Edición de Aviso</b></h4>
      </div>
      <div class="modal-body">
        <form #categoriaForm="ngForm">
          <h4><strong>Ciudad: </strong>{{ avisomodal.datosUbicacion.ciudad }}</h4>
          <h4><strong>Calle: </strong>{{ avisomodal.datosUbicacion.calle }}</h4>
          <h4><strong>Seguimiento: </strong>{{ avisomodal.seguimiento }}</h4>
          <h4><strong>Autor: </strong>{{ avisomodal.autor }}</h4>
          <h4><strong>Apoyos: </strong>{{ avisomodal.apoyos }}</h4><br>
          <div class="form-group">
            <label>Descripción</label>
            <input type="text" class="form-control" [(ngModel)]="avisomodal.descripcion" name="publisher" id="descripcion" required>
          </div>
          <div class="form-group">
            <label>Seguimiento</label>
            <input type="text" class="form-control" [(ngModel)]="avisomodal.seguimiento" name="publisher" id="seguimiento" required>
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-success" (click)="updateAviso(avisomodal)">Actualizar</button>
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
      </div>
    </div>

  </div>
</div>
